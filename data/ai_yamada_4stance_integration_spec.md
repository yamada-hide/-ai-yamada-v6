# AI山田 x 4スタンス理論 完全統合実装仕様書 v1.0

## 📋 統合データソース

### 既存学習済みデータ
1. **AI山田v5.2.1 Instructions** (5.4KB)
   - 3段階感情レベル判定
   - メタアウトカム(5-6質問)
   - GROWモデル深掘り50質問
   - 関西弁・丁寧語
   - げんなりサイン検出
   - クロージング

2. **山田式テニスメソッド集 v5.2** (11KB)
   - 35種のテニスメソッド
   - 基本技術・フットワーク・戦術・メンタル・上級・人生統合

3. **人間GPS(エニアグラム診断)** (150KB相当)
   - 9タイプ × 81パターン
   - 3段階診断フロー(90問)
   - ステルス診断メッセージ

### 新規統合データ(本設計書)
4. **4スタンス理論 統合設計書**(今回提供)
   - タイプ判定ロジック(3ステップ)
   - 4タイプ詳細特性(A/F/U/W)
   - テニス動作分析(フォアハンド・サーブ・ボレー)
   - アドバイステンプレート(4タイプ用)

---

## 🎯 統合実装の全体構造

### Phase 1: 基本AI山田(完成済み)
- 感情レベル判定 → メタアウトカム → GROW深掘り
- 35テニスメソッド統合
- 関西弁対応・クロージング

### Phase 2: 4スタンス理論統合(本仕様書)
#### 2-1. タイプ判定システム
```
入力: ユーザーの動画/質問応答
出力: A/F/U/W いずれか1タイプ

判定フロー:
Step 1: Upper(前重心) vs Down(後ろ重心)
Step 2: Inner(内側圧) vs Outer(外側圧)
Step 3: Straight(直線) vs Cross(捻転)
→ 最終判定: A/F/U/W
```

#### 2-2. 判定基準詳細表

**Step 1: Upper(上半身主導) vs Down(下半身主導)**

| 判定軸 | Upper型の特徴 | Down型の特徴 |
|--------|--------------|-------------|
| 重心位置 | 前足(つま先・母指球)に体重 | 後ろ足(かかと)に体重 |
| 力の発生源 | 肩甲骨・肩・手首を積極的に使う | 股関節・膝・足首を積極的に使う |
| 主要関節 | 肩関節・手首中心 | 股関節・膝関節中心 |
| 握り方 | 指先でグリップ | 手のひら全体でグリップ |

**Step 2: Inner(内側圧) vs Outer(外側圧)**

| 判定軸 | Inner型の特徴 | Outer型の特徴 |
|--------|--------------|-------------|
| 足圧ポイント | 親指・人差し指側 | 小指・薬指側 |
| 手圧ポイント | 親指・人差し指側 | 小指・薬指側 |
| 体軸 | 体の中心線を意識 | 体の外側ラインを意識 |

**Step 3: Straight(直線運動) vs Cross(捻転運動)**

| 判定軸 | Straight型の特徴 | Cross型の特徴 |
|--------|--------------|-------------|
| 体の捻り | 捻りを抑え、直線的 | 積極的に体を捻る |
| 四肢の動き | 直線的な伸縮 | 回旋・螺旋運動 |
| ステップ | 直線的ステップ | クロスステップ多用 |

#### 2-3. 最終タイプ決定表

| タイプ | Upper/Down | Inner/Outer | Straight/Cross | 重心 | 圧力点 | 運動様式 |
|--------|-----------|------------|---------------|-----|--------|---------|
| **A** | Upper | Inner | Cross | 前 | 内側 | 捻転 |
| **F** | Upper | Outer | Straight | 前 | 外側 | 直線 |
| **U** | Down | Inner | Straight | 後 | 内側 | 直線 |
| **W** | Down | Outer | Cross | 後 | 外側 | 捻転 |

---

## 🎾 テニス動作分析統合

### A型(Upper+Inner+Cross)の詳細

#### フォアハンドストローク
- **テイクバック**: 肩甲骨を積極的に使い、手首を柔軟に。親指・人差し指でグリップ
- **インパクト**: 母指球で地面を押し、体幹を回旋させながら打点に入る
- **フォロースルー**: 体を大きく捻りながら、腕を巻き込むように振り切る
- **フットワーク**: 素早い足運びで打点調整。最後に前足(母指球)で着地

#### サーブ
- **トス/スタンス**: 前足重心。トスは頭上やや前方
- **膝の使い方**: 膝を曲げて沈み込むが、上半身主導
- **パワー発生**: 肩甲骨と体幹の回旋で加速
- **インパクト/着地**: 前足着地で安定

#### ボレー
- **スタンス**: 前足重心で準備
- **リアクション/ステップ**: 素早く細かいステップ
- **インパクト**: 手首・肩を柔軟に使い、親指・人差し指側で押し出す

#### 強み
- 細やかなコントロール、柔軟な体の使い方、コースの打ち分け

#### 弱み
- パワー不足気味、前のめりでバランス崩しやすい

#### 適性プレースタイル
- ベースライン、オールラウンダー、多彩な球種

---

### F型(Upper+Outer+Straight)の詳細

#### フォアハンドストローク
- **テイクバック**: 小指・薬指側でグリップ。肩甲骨を使うが捻りは少ない
- **インパクト**: 母指球で地面を押し、直線的に前進する力でボールを押し込む
- **フォロースルー**: 腕を真っ直ぐ前方に伸ばす
- **フットワーク**: 前足着地で安定感重視

#### サーブ
- **トス/スタンス**: 前足重心。トスは頭上
- **膝の使い方**: 膝の屈伸は控えめ、上半身の伸び上がりで打つ
- **パワー発生**: 肩甲骨の上方回旋と直線的な腕の振り
- **インパクト/着地**: 前足着地

#### ボレー
- **スタンス**: 前足重心
- **リアクション/ステップ**: 直線的ステップ
- **インパクト**: 小指・薬指側で押し出す

#### 強み
- 攻撃力、直線的で速い球、積極的なプレー

#### 弱み
- 柔軟性に欠ける、守備時の対応力

#### 適性プレースタイル
- アグレッシブベースライナー、ネットプレー

---

### U型(Down+Inner+Straight)の詳細

#### フォアハンドストローク
- **テイクバック**: かかと重心で安定。親指・人差し指でグリップ
- **インパクト**: 股関節・膝で地面を押し、体幹は捻らず直線的に押し込む
- **フォロースルー**: 腕を真っ直ぐ伸ばす
- **フットワーク**: かかと着地で安定

#### サーブ
- **トス/スタンス**: 後ろ足重心。トスは頭上やや後方
- **膝の使い方**: 膝の屈伸を大きく使う
- **パワー発生**: 下半身の伸び上がりで加速
- **インパクト/着地**: 後ろ足着地で安定

#### ボレー
- **スタンス**: かかと重心
- **リアクション/ステップ**: 安定重視
- **インパクト**: 親指・人差し指側で押し出す

#### 強み
- 安定性、バランスの良さ、粘り強さ

#### 弱み
- 攻撃力不足、ダイナミックさに欠ける

#### 適性プレースタイル
- ディフェンシブベースライナー、カウンターパンチャー

---

### W型(Down+Outer+Cross)の詳細

#### フォアハンドストローク
- **テイクバック**: かかと重心。小指・薬指側でグリップ
- **インパクト**: 股関節・膝で地面を押し、体幹を回旋
- **フォロースルー**: 腕を巻き込むように振り切る
- **フットワーク**: かかと着地

#### サーブ
- **トス/スタンス**: 後ろ足重心。トスは頭上やや後方
- **膝の使い方**: 膝の屈伸 + 体幹の回旋
- **パワー発生**: 下半身と体幹の連動
- **インパクト/着地**: 後ろ足着地

#### ボレー
- **スタンス**: かかと重心
- **リアクション/ステップ**: クロスステップ
- **インパクト**: 小指・薬指側で押し出す

#### 強み
- リーダーシップ、戦略性、パワーと安定の両立

#### 弱み
- 細かい技術に弱い、柔軟性に欠ける

#### 適性プレースタイル
- オールラウンダー、サーブ&ボレー

---

## 💬 アドバイステンプレート(4タイプ用)

### 構造
```
【あなたの体の特性】
→ タイプ名(A/F/U/W)の説明

【あなたの特徴】
→ 性格・行動パターン

【フォアハンドの具体的アドバイス】
- 重心の取り方
- 関節の使い方
- グリップ・インパクト
- 動きのパターン
- ショットの流れ

【サーブの具体的アドバイス】
- トス・スタンス
- 膝の使い方
- パワー発生
- インパクト・着地

【ボレーの具体的アドバイス】
- スタンス
- リアクション・ステップ
- インパクト

【あなたの強みの活かし方】
→ タイプ別強み

【おすすめ練習メニュー】
→ タイプ別練習法
```

---

## 🔄 AI山田への統合フロー

### ユーザー体験フロー

1. **初回診断**(オプション)
   - 簡易質問(10問)または動画アップロードで4スタンス判定
   - A/F/U/Wいずれかを判定・保存

2. **テニス相談開始**
   - 「フォアハンドが上手く打てない」など
   - AI山田が感情レベル判定 → メタアウトカム/GROW

3. **4スタンス統合アドバイス**
   - 判定済みタイプ(例: A型)に基づき:
     - 「山田さんはA型やから、母指球重心で、肩甲骨使って...」
     - タイプ別テンプレート適用
     - 35メソッドと組み合わせ

4. **継続サポート**
   - セッション履歴にタイプ保存
   - 次回以降は自動適用

---

## 🛠️ 技術実装要件

### 動画処理パイプライン(Phase 3で実装)
1. **動画アップロード**: Streamlit `st.file_uploader`
2. **動画解析**: OpenAI GPT-4 Vision API
3. **特徴抽出**:
   - 重心位置(前/後)
   - 足圧ポイント(内/外)
   - 体の捻り(直線/捻転)
4. **タイプ判定**: 3ステップロジック実行
5. **結果保存**: セッションデータに保存

### データベース設計
```python
user_profile = {
    "user_id": "uuid",
    "four_stance_type": "A" | "F" | "U" | "W" | None,
    "diagnosis_date": "2025-12-09",
    "confidence_score": 0.85,  # 判定精度
    "session_history": [...]
}
```

### AIモデル選定
- **姿勢推定**: OpenAI GPT-4 Vision(動画解析)
- **動作解析**: 同上
- **タイプ判定**: ルールベースロジック(本仕様書の判定表)

---

## 📜 著作権・特許回避策

### 一般理論としての利用範囲
- 4スタンス理論の基本概念(Upper/Down等)は一般化された運動理論として扱う
- 「山田式身体分類法」など独自名称を併用可能

### 山田式独自メソッドとの差別化
- AI山田独自: **「メタアウトカム × 4スタンス × 35メソッド × 人間GPS」の統合**
- これは完全オリジナル統合であり、他にない価値

### 具体的表現例
❌NG: 「廣戸聡一氏の4スタンス理論に基づき...」
✅OK: 「山田式身体分類法(運動特性A/F/U/W)により、あなたに最適な...」

---

## 🚀 実装優先順位

### Phase 1(完成済み): 基本AI山田
- ✅ 感情判定・メタアウトカム・GROW・35メソッド

### Phase 2(本仕様書): 質問ベース4スタンス判定
- 📋 10問の簡易診断実装(2-3日)
- 📋 判定ロジック実装(3ステップ)
- 📋 タイプ別アドバイステンプレート統合
- 📋 セッションデータ保存

### Phase 3(将来): 動画解析4スタンス判定
- 📅 動画アップロード機能(+1週間)
- 📅 GPT-4 Vision統合(+1週間)
- 📅 自動判定精度向上(+2週間)

---

## 🎯 成功指標

### ユーザー満足度
- パーソナライズド感: 80%以上
- アドバイス的中率: 70%以上

### 技術指標
- 判定精度: 75%以上(質問ベース)、85%以上(動画ベース)
- 応答時間: 5秒以内

### ビジネス指標
- 4スタンス診断利用率: 60%以上
- 有料転換率: 15%以上(通常10%)

---

## 📄 まとめ

この実装仕様書により、以下が実現可能:

1. **AI山田v5.2.1** + **4スタンス理論** の完全統合
2. 質問ベース簡易判定(Phase 2)から動画解析(Phase 3)への段階的実装
3. 著作権・特許リスクを回避した独自メソッド確立
4. ユーザー満足度とビジネス成果の両立

**開発期間見積もり:**
- Phase 2(質問ベース判定): 1週間
- Phase 3(動画解析): +3週間
- **合計**: 約1ヶ月で完全実装可能

---

**作成日**: 2025-12-09  
**バージョン**: v1.0  
**作成者**: AI山田開発チーム  
**承認**: 山田秀

